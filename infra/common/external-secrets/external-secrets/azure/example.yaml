apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &secret example-credentials
spec:
  refreshInterval: 24h
  secretStoreRef:
    kind: ClusterSecretStore
    name: azure-store

  target:
    name: *secret
    creationPolicy: Owner

  data:
  # name of the SECRET in the Azure KV (no prefix is by default a SECRET)
  - secretKey: test-value
    remoteRef:
      key: test-value2

---
# ref: https://external-secrets.io/latest/api/externalsecret/
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &secret example2-credentials
spec:
  refreshInterval: 24h
  secretStoreRef:
    kind: ClusterSecretStore
    name: azure-store

  target:
    name: *secret
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        TEST_VAR: "{{.testValue}}"
  data:
    - secretKey: testValue
      remoteRef:
        key: test-value2