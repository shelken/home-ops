apiVersion: "cilium.io/v2alpha1"
kind: CiliumL2AnnouncementPolicy
metadata:
  name: l2-policy
  namespace: kube-system
spec:
  # serviceSelector:
  #   matchLabels:
  #     cilium.io/ingress: "true"

  # IMPORTANT: if externalIPss is desired, externalIPs.enabled=true must be set in values.yaml
  # externalIPs: true
  loadBalancerIPs: true
  nodeSelector:
    matchLabels:
      kubernetes.io/os: linux

---
apiVersion: "cilium.io/v2alpha1"
kind: CiliumLoadBalancerIPPool
metadata:
  name: pool
  namespace: kube-system
spec:
  blocks:
    - start: "192.168.6.118"
      stop: "192.168.6.120"

  serviceSelector:
    matchLabels:
      cilium.io/ingress: "true"