# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: grafana
spec:
  interval: 1h
  chartRef:
    kind: OCIRepository
    name: grafana-operator
  values:
    dashboard:
      enabled: true
    serviceMonitor:
      enabled: true
    ## ref: https://github.com/grafana/helm-charts/blob/main/charts/grafana/values.yaml
    # dashboards:
    #   default:
    #     cert-manager:
    #       # renovate: depName="Cert-manager-Kubernetes"
    #       gnetId: 20842
    #       revision: 3
    #       datasource: Prometheus
    #     clash:
    #       # renovate: depName="Clash"
    #       gnetId: 18530
    #       revision: 3
    #       datasource:
    #         - { name: DS_PROMETHEUS, value: Prometheus }
    #     envoy:
    #       # renovate: depName="Envoy Proxy Monitoring gRPC"
    #       gnetId: 23239
    #       revision: 1
    #       datasource:
    #         - { name: DS_AFRANET_PROMETHEUS, value: Prometheus }
    #     external-dns:
    #       # renovate: depName="External-dns"
    #       gnetId: 15038
    #       revision: 3
    #       datasource: Prometheus
    #     kubernetes-api-server:
    #       # renovate: depName="Kubernetes / System / API Server"
    #       gnetId: 15761
    #       revision: 20
    #       datasource: Prometheus
    #     kubernetes-coredns:
    #       # renovate: depName="Kubernetes / System / CoreDNS"
    #       gnetId: 15762
    #       revision: 22
    #       datasource: Prometheus
    #     kubernetes-global:
    #       # renovate: depName="Kubernetes / Views / Global"
    #       gnetId: 15757
    #       revision: 43
    #       datasource: Prometheus
    #     kubernetes-namespaces:
    #       # renovate: depName="Kubernetes / Views / Namespaces"
    #       gnetId: 15758
    #       revision: 44
    #       datasource: Prometheus
    #     kubernetes-nodes:
    #       # renovate: depName="Kubernetes / Views / Nodes"
    #       gnetId: 15759
    #       revision: 40
    #       datasource: Prometheus
    #     kubernetes-pods:
    #       # renovate: depName="Kubernetes / Views / Pods"
    #       gnetId: 15760
    #       revision: 37
    #       datasource: Prometheus
    #     kubernetes-volumes:
    #       # renovate: depName="K8s / Storage / Volumes / Cluster"
    #       gnetId: 11454
    #       revision: 14
    #       datasource: Prometheus
    #     longhorn:
    #       # renovate: depName="Longhorn"
    #       gnetId: 16888
    #       revision: 9
    #       datasource: Prometheus
    #     mosdns:
    #       # renovate: depName="MOSDNS"
    #       gnetId: 19305
    #       revision: 2
    #       datasource:
    #         - { name: DS_PROMETHEUS-1, value: Prometheus }
    #         - { name: DS_LOKI-1, value: Loki }
    #     node-exporter-full:
    #       # renovate: depName="Node Exporter Full"
    #       gnetId: 1860
    #       revision: 42
    #       datasource:
    #         - { name: DS_PROMETHEUS, value: Prometheus }
    #     openwrt:
    #       # renovate: depName="OpenWrt"
    #       gnetId: 21766
    #       revision: 1
    #       datasource:
    #         - { name: DS_PROMETHEUS, value: Prometheus }
    #     prometheus:
    #       # renovate: depName="Prometheus"
    #       gnetId: 19105
    #       revision: 8
    #       datasource: Prometheus
    #     volsync:
    #       # renovate: depName="VolSync Dashboard"
    #       gnetId: 21356
    #       revision: 3
    #       datasource:
    #         - { name: DS_PROMETHEUS, value: Prometheus }
    #         - { name: VAR_REPLICATIONDESTNAME, value: .*-dst }
    # sidecar:
    #   image:
    #     registry: ghcr.io
    #     repository: home-operations/k8s-sidecar
    #     tag: 1.30.9@sha256:74d65c3def9276b24b5bfe41f8efb773174e7a1ecf3c9b5a31bd02cfdee232c9
    #   dashboards:
    #     enabled: true
    #     searchNamespace: ALL
    #     label: grafana_dashboard
    #     folderAnnotation: grafana_folder
    #     provider:
    #       disableDelete: true
    #       foldersFromFilesStructure: true
    #   datasources:
    #     enabled: true
    #     searchNamespace: ALL
    #     label: grafana_datasource
    #     labelValue: ""
    # plugins:
    #   - grafana-clock-panel
    #   - grafana-piechart-panel
    #   - grafana-worldmap-panel
    #   # - natel-discrete-panel
    #   # - pr0ps-trackmap-panel
    #   # - vonage-status-panel
    # testFramework:
    #   enabled: false
