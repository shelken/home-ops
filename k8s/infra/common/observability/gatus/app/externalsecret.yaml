# ref: https://external-secrets.io/latest/api/externalsecret/
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &secret gatus-secret
spec:
  # refreshInterval: 30m
  secretStoreRef:
    kind: ClusterSecretStore
    name: azure-store
  target:
    name: *secret
    template:
      data:
        WEBHOOK_URL: "{{.gatus_webhook_url}}"
        GATUS_SSO_CLIENT_SECRET: "{{ .GATUS_SSO_CLIENT_SECRET }}"
        TELEGRAM_BOT_TOKEN: "{{ .TELEGRAM_BOT_ONE_TOKEN }}"
        TELEGRAM_USER_ID: "{{ .TELEGRAM_MY_ID }}"
        WECOM_BOT_TOKEN: "{{ .WECOM_BOT_TOKEN }}"
  dataFrom:
    - extract:
        key: slack
    - extract:
        key: gatus
    - extract:
        key: telegram
    - extract:
        key: wecom
