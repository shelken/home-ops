# 路由器配置文档

本目录包含主路由器 (`router-mine`) 的各项配置文档。

## 设备信息

| 项目 | 值 |
| :--- | :--- |
| **设备名称** | router-mine |
| **管理 IP** | 192.168.6.1 |
| **操作系统** | OpenWrt |
| **SSH 访问** | `ssh router-mine` |

## 配置文档

| 文档 | 说明 |
| :--- | :--- |
| [VLAN 配置](./vlan.md) | VLAN 网络划分，包括主网 (VLAN 6) 和 IoT 网 (VLAN 50) |
| [mDNS 配置](./mdns.md) | Avahi mDNS 反射，实现跨 VLAN 服务发现 |
| [BGP 配置](./bgp.md) | BIRD BGP 路由，实现跨地域 Pod 网络互通 |

## 网络架构概览

```
┌─────────────────────────────────────────────────────────────┐
│                     router-mine (192.168.6.1)               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  VLAN 6 (br-lan.6)          VLAN 50 (br-lan.50)            │
│  ├── 192.168.6.0/24         ├── 192.168.50.0/24            │
│  ├── 主内网                  ├── IoT 网络                   │
│  └── K8s 节点管理口          └── 智能家居设备                │
│                                                             │
│  ┌─────────────┐            ┌─────────────┐                │
│  │   Avahi     │◄──反射────►│   Avahi     │                │
│  │  (mDNS)     │            │  (mDNS)     │                │
│  └─────────────┘            └─────────────┘                │
│                                                             │
│  ┌─────────────────────────────────────────┐               │
│  │              BIRD (BGP)                  │               │
│  │  ├── 连接本地 K8s 节点 (AS 64514)        │               │
│  │  └── 连接远程路由器 via ZeroTier         │               │
│  └─────────────────────────────────────────┘               │
└─────────────────────────────────────────────────────────────┘
```

## 快速命令

```bash
# 查看 VLAN 配置
cat /etc/config/network

# 查看 mDNS 服务
avahi-browse -a -t

# 查看 BGP 状态
birdc show protocols

# 查看路由表
ip route | grep 10.42
```

## 相关文档

- [跨地域节点互联架构](../17-add-remote-node.md) - 完整的 BGP 全互联方案（含 Cilium 配置）