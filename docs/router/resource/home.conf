router id 192.168.0.1;
log syslog { info, warning, error };

define LOCAL_ASN = 64515;
define K8S_ASN = 64514;
define MINE_ASN = 64513;
define MINE_ROUTER_IP = 192.168.191.12;

define YUUKO_IP = 192.168.6.80;

protocol device {
    scan time 10;
}

protocol direct {
    ipv4;
    interface "br-lan", "br-lan.*";
}

protocol kernel {
    ipv4 {
        import all;
        export all;
    };
    persist;
    learn;
}

template bgp k8s {
    local as LOCAL_ASN;
    hold time 90;

    ipv4 {
        import all;
        export all;
        next hop self;
    };
}

protocol bgp yuuko from k8s {
    neighbor YUUKO_IP as K8S_ASN;
}

protocol bgp router_mine {
    local as LOCAL_ASN;
    neighbor MINE_ROUTER_IP as MINE_ASN;

    ipv4 {
        import all;
        export all;
        next hop self;
    };
}
